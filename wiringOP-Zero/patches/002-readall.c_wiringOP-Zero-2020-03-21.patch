--- a/gpio/readall.c	2022-01-13 23:50:18.000000000 +0200
+++ b/gpio/readall.c	2022-02-01 16:29:19.503787538 +0200
@@ -33,7 +33,9 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 
-#include <wiringPi.h>
+#include "OrangePi.h"
+#include "../wiringPi/OrangePi.h"
+#include "../wiringPi/wiringPi.h"
 
 extern int wpMode ;
 
@@ -77,88 +79,9 @@
 
 static char *alts [] =
 {
-  "IN", "OUT", "ALT5", "ALT4", "ALT0", "ALT1", "ALT2", "ALT3"
+  "IN", "OUT", "ALT5", "ALT4", "ALT0", "ALT1", "ALT2", "OFF"
 } ;
 
-//Beckert
-// guenter anfang
-static int physToWpi [64] =
-{
-  -1,        // 0
-  
-  -1,  -1,   // 1, 2
-   8,  -1,   // 3, 4
-   9,  -1,   // 5, 6
-   7,  15,   // 7, 8
-  -1,  16,   // 9, 10
-   0,   1,   //11, 12
-   2,  -1,   //13, 14
-   3,   4,   //15, 16
-  -1,   5,   //17, 18
-  12,  -1,   //19, 20
-  13,   6,   //21, 22
-  14,  10,   //23, 24
-  -1,  11,   //25, 26
-  
-  30,  -1,   //27, 28
-  
-  -1,  -1,   //29, 30
-  -1,  -1,   //31, 32
-  -1,  -1,   //33, 34
-  -1,  -1,   //35, 36
-  -1,  -1,   //37, 38
-  -1,  -1,   //39, 40
-   -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, //41-> 55
-   -1, -1, -1, -1, -1, -1, -1, -1 // 56-> 63
-} ;
-//guenter ende
-//Beckert
-
-//Beckert
-//guenter orange pi
-static char *physNames [64] = 
-{
-      NULL,
-
- "    3.3v", "5v      ",
- "   SDA.0", "5V      ",
- "   SCL.0", "0v      ",
- "  GPIO.7", "TxD3    ",
- "      0v", "RxD3    ",
- "    RxD2", "GPIO.1  ",
- "    TxD2", "0v      ",
- "    CTS2", "GPIO.4  ",
- "    3.3v", "GPIO.5  ",
- "    MOSI", "0v      ",
- "    MISO", "RTS2    ",
- "    SCLK", "CE0     ",
- "      0v", "GPIO.11 ",
- 
- "STAT-LED", "PWR-LED ",
- 
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-       NULL, NULL,
-	   NULL, NULL,
-	   NULL, NULL,
-	   NULL, NULL,
-	   NULL, NULL,
-	   NULL,
-} ;
-// guenter ende
-//Beckert
-
-
 
 /*
  * readallPhys:
@@ -172,13 +95,13 @@
   int pin ;
 
   if (physPinToGpio (physPin) == -1)
-    printf ("|     |    ") ;
+    printf ("  |      |    ") ;
   else
-    printf ("| %3d | %3d", physPinToGpio (physPin), physToWpi [physPin]) ;
+    printf ("  |  %3d | %3d", physPinToGpio (physPin), physToGpio_BP [physPin]) ;
 
   printf (" | %s", physNames [physPin]) ;
 
-  if (physToWpi [physPin] == -1)
+  if (physToGpio_BP [physPin] == -1)
     printf (" |      |  ") ;
   else
   {
@@ -187,11 +110,11 @@
     else if (wpMode == WPI_MODE_PHYS)
       pin = physPin ;
     else
-      pin = physToWpi [physPin] ;
+      pin = physToGpio_BP [physPin] ;
 
     printf (" | %4s", alts [getAlt (pin)]) ;
     printf (" | %d", digitalRead (pin)) ;
-  }
+  };
 
 // Pin numbers:
 
@@ -201,7 +124,7 @@
 
 // Same, reversed
 
-  if (physToWpi [physPin] == -1)
+  if (physToGpio_BP [physPin] == -1)
     printf (" |   |     ") ;
   else
   {
@@ -210,44 +133,43 @@
     else if (wpMode == WPI_MODE_PHYS)
       pin = physPin ;
     else
-      pin = physToWpi [physPin] ;
+      pin = physToGpio_BP [physPin] ;
 
     printf (" | %d", digitalRead (pin)) ;
     printf (" | %-4s", alts [getAlt (pin)]) ;
-  }
+  };
 
   printf (" | %-5s", physNames [physPin]) ;
 
-  if (physToWpi     [physPin] == -1)
-    printf (" |     |    ") ;
+  if (physToGpio_BP [physPin] == -1)
+    printf (" |     |     ") ;
   else
-    printf (" | %-3d | %-3d", physToWpi [physPin], physPinToGpio (physPin)) ;
+    printf (" | %-3d | %-3d ", physToGpio_BP [physPin], physPinToGpio (physPin)) ;
 
   printf (" |\n") ;
-}
+};
 
 
 void cmReadall (void)
 {
   int pin ;
 
-  printf ("+-----+------+-------+      +-----+------+-------+\n") ;
-  printf ("| Pin | Mode | Value |      | Pin | Mode | Value |\n") ;
-  printf ("+-----+------+-------+      +-----+------+-------+\n") ;
+  printf ("  +----------+-----+------+-------+\n") ;
+  printf ("  |   GPIO   | wPi | Mode | Value |\n") ;
+  printf ("  +----------+-----+------+-------+\n") ;
 
-  for (pin = 0 ; pin < 28 ; ++pin)
+  for (pin = 0 ; pin < 384 ; ++pin)
   {
-    printf ("| %3d ", pin) ;
-    printf ("| %-4s ", alts [getAlt (pin)]) ;
-    printf ("| %s  ", digitalRead (pin) == HIGH ? "High" : "Low ") ;
-    printf ("|      ") ;
-    printf ("| %3d ", pin + 28) ;
-    printf ("| %-4s ", alts [getAlt (pin + 28)]) ;
-    printf ("| %s  ", digitalRead (pin + 28) == HIGH ? "High" : "Low ") ;
-    printf ("|\n") ;
+     if (wpiPinToGpio (pin) == -1)
+	continue ;
+    printf ("  | gpio-%-3d",wpiPinToGpio (pin)) ;
+    printf (" | %-3d",pin) ;
+    printf (" | %-4s", alts [getAlt (pin)]) ;
+    printf (" | %s  |\n", digitalRead (pin) == HIGH ? "High" : "Low ") ;
+
   }
 
-  printf ("+-----+------+-------+      +-----+------+-------+\n") ;
+  printf ("  +----------+-----+------+-------+\n") ;
 }
 
 
@@ -330,16 +252,43 @@
 {
   int pin ;
 
-  printf ("+-----+-----+----------+------+--Orange Pi Zero--+------+----------+-----+-----+\n") ;
-  printf ("| H2+ | wPi |   Name   | Mode | V | Physical | V | Mode | Name     | wPi | H2+ |\n") ;
-  printf ("+-----+-----+----------+------+---+----++----+---+------+----------+-----+-----+\n") ;
+  char name [80] ;
+  FILE *fd ;
+
+  if ((fd = fopen ("/proc/device-tree/model", "r")) != NULL)
+  {
+    if ( fgets (name, 80, fd) ){;}
+    fclose (fd) ;
+  }
+
+  printf ("\n%-27s  %-30s%25s\n", "  +------+-----+----------+", name, "+----------+-----+------+"); //%-20s %-40s %19s
+  printf ("  | GPIO | wPi |   Name   | Mode | V | Physical | V | Mode | Name     | wPi | GPIO |\n") ;
+  printf ("  +------+-----+----------+------+---+----++----+---+------+----------+-----+------+\n") ;
+
+#if CONFIG_ORANGEPI_H3 || defined CONFIG_ORANGEPI_RK3399 || CONFIG_ORANGEPI_4 || CONFIG_ORANGEPI_PC2 || CONFIG_ORANGEPI_PRIME || CONFIG_ORANGEPI_WIN
+  for (pin = 1 ; pin <= 40; pin += 2)
+
+#elif CONFIG_ORANGEPI_ZERO || CONFIG_ORANGEPI_R1 || CONFIG_ORANGEPI_LITE2 || CONFIG_ORANGEPI_ZEROPLUS2_H3 || CONFIG_ORANGEPI_3 || CONFIG_ORANGEPI_ZEROPLUS || CONFIG_ORANGEPI_ZEROPLUS2_H5 || CONFIG_ORANGEPI_800
   for (pin = 1 ; pin <= 26 ; pin += 2)
+
+#elif CONFIG_ORANGEPI_R1PLUS
+  for (pin = 1 ; pin <= 13; pin += 2)
+
+#elif CONFIG_ORANGEPI_ZERO2
+  for (pin = 1 ; pin <= 34; pin += 2)
+
+#endif
+
     readallPhys (pin) ;
-  printf ("+-----+-----+----------+------+---+---LEDs---+---+------+----------+-----+-----+\n") ;
+
+#if CONFIG_ORANGEPI_ZERO
+  printf ("  +------+-----+----------+------+---+----++----+---+------+----------+-----+------+\n") ;
   readallPhys (27) ;
-  printf ("+-----+-----+----------+------+---+-----+----+---+------+----------+-----+-----+\n") ;
-  printf ("| H2+ | wPi |   Name   | Mode | V | Physical | V | Mode | Name     | wPi | H2+ |\n") ;
-  printf ("+-----+-----+----------+------+--Orange Pi Zero--+------+----------+-----+-----+\n") ;
+#endif /* ORANGEPI_ZERO */
+
+  printf ("  +------+-----+----------+------+---+----++----+---+------+----------+-----+------+\n") ;
+  printf ("  | GPIO | wPi |   Name   | Mode | V | Physical | V | Mode | Name     | wPi | GPIO |\n") ;
+  printf ("%-27s  %-30s%25s\n\n", "  +------+-----+----------+", name, "+----------+-----+------+"); //%-20s %-40s %25s
 }
 // changed by Christian Beckert
 
